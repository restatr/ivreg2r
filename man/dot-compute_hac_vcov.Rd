% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vcov-hac.R
\name{.compute_hac_vcov}
\alias{.compute_hac_vcov}
\title{Compute HAC variance-covariance matrix}
\usage{
.compute_hac_vcov(
  bread,
  X_hat,
  resid,
  time_index,
  kernel,
  bw,
  N,
  K,
  dofminus = 0L,
  sdofminus = 0L,
  weights = NULL,
  weight_type = "aweight"
)
}
\arguments{
\item{bread}{K x K bread matrix.}

\item{X_hat}{N x K projected regressor matrix (sorted by time).}

\item{resid}{N-vector of residuals (sorted by time).}

\item{time_index}{List from \code{.build_time_index()}.}

\item{kernel}{Canonical kernel name.}

\item{bw}{Numeric bandwidth.}

\item{N}{Integer: number of observations.}

\item{K}{Integer: number of regressors.}

\item{dofminus}{Integer: large-sample DoF adjustment.}

\item{sdofminus}{Integer: small-sample DoF adjustment.}

\item{weights}{Normalized weights (sorted) or NULL.}

\item{weight_type}{Character: weight type.}
}
\value{
K x K variance-covariance matrix.
}
\description{
Sandwich estimator: \code{V = bread * meat * bread * N/(N - dofminus)}.
This matches the HC scaling pattern used in \code{.compute_hc_vcov()}.
Note: Stata's m_omega divides by (N-dofminus) in Z-space, but our bread
is \verb{(X'P_Z X)^\{-1\}} (unscaled), so we use the HC-style \code{N/(N-dofminus)}
multiplier instead.
}
\keyword{internal}
